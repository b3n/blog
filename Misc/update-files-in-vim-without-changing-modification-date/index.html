<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="A software engineer's blog." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
        <title>Update Files In Vim Without Changing Modification Date</title>
        <link href="/style.css" rel="stylesheet" type="text/css" media="screen" />
        <link rel="icon" type="image/png" href="/favicon.gif" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    </head>
    <body>
        <div id="wrapper">
            <header>
                <h1>
                    <a href="/" class="logo">Shobute</a>
                    <span id="flair">üçª</span>
                </h1>
                <hr />
            </header>
            <article>
  <h2>
    <a href="/Misc">Misc</a>
    /
    <strong><a href="/Misc/update-files-in-vim-without-changing-modification-date">Update Files In Vim Without Changing Modification Date</a></strong>
  </h2>
  <p>The backend of <span class="logo">Shobute</span> is very simple, all the blog posts are HTML files stored in the directory <code>posts/</code>, the modification time of each file is used to tell when they were last updated.</p>
<p>Occasionally I want to make a very small change to a file without updating its modification time, I wrote the following Vim function to do that:</p>
<pre>
function! WriteSmall()
    let mtime = system("date -d @`stat -c %Y ".shellescape(expand('%:p')) . "`")
    write
    call system("touch --date='".mtime."' ".shellescape(expand('%:p')))
endfunction
map &lt;F4> :call WriteSmall()&lt;CR>
</pre>
<p>I&rsquo;m sure there are other uses for it. You can put it in your Vim configuration and then press F4 (or map it to another key) every time you want to write the file without updating the modification time. It assumes you have <code>date</code>, <code>stat</code> and <code>touch</code> from the GNU userland.</p>

  <footer><p>Last updated on <time title="2018-06-04T15:35:40+01:00">2018-06-04</time>.</p></footer>
</article>
<hr />

            <footer>
                <p>All content is <a href="http://creativecommons.org/publicdomain/zero/1.0/">public domain</a> unless otherwise stated. <a href="/" class="logo">Shobute</a> is powered by procrastination.</p>
            </footer>
        </div>
    </body>
</html>
